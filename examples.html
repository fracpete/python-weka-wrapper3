
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Examples &#8212; python-weka-wrapper3 0.2.12 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Command-line" href="commandline.html" />
    <link rel="prev" title="Troubleshooting" href="troubleshooting.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="examples">
<h1>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h1>
<p>The following examples are meant to be executed in sequence, as they rely on previous steps,
e.g., on data present.</p>
<p>For more examples, check out the example repository on github:</p>
<p><a class="reference external" href="https://github.com/fracpete/python-weka-wrapper3-examples">github.com/fracpete/python-weka-wrapper3-examples</a></p>
<section id="start-up-jvm">
<h2>Start up JVM<a class="headerlink" href="#start-up-jvm" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">weka.core.jvm</span> <span class="k">as</span> <span class="nn">jvm</span>
<span class="n">jvm</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>
</div>
<p>If you want to use the classpath environment variable and all currently installed Weka packages,
use the following call:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">jvm</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">system_cp</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">packages</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>In case your Weka home directory is not located in <cite>wekafiles</cite> in your user’s home directory,
then you have two options for specifying the alternative location: use the <cite>WEKA_HOME</cite> environment
variable or the <cite>packages</cite> parameter, supplying a directory. The latter is shown below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">jvm</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">packages</span><span class="o">=</span><span class="s2">&quot;/my/packages/are/somwhere/else&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Most of the times, you will want to increase the maximum heap size available to the JVM.
The following example reserves 512 MB:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">jvm</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">max_heap_size</span><span class="o">=</span><span class="s2">&quot;512m&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If you want to print system information at start up time, then you can use the <cite>system_info</cite>
parameter:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">jvm</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">system_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>This will output key-value pairs generated by Weka’s <cite>weka.core.SystemInfo</cite> class,
similar to this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DEBUG</span><span class="p">:</span><span class="n">weka</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">jvm</span><span class="p">:</span><span class="n">System</span> <span class="n">info</span><span class="p">:</span>
<span class="n">DEBUG</span><span class="p">:</span><span class="n">weka</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">jvm</span><span class="p">:</span><span class="n">java</span><span class="o">.</span><span class="n">runtime</span><span class="o">.</span><span class="n">name</span><span class="o">=</span><span class="n">OpenJDK</span> <span class="n">Runtime</span> <span class="n">Environment</span>
<span class="n">DEBUG</span><span class="p">:</span><span class="n">weka</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">jvm</span><span class="p">:</span><span class="n">java</span><span class="o">.</span><span class="n">awt</span><span class="o">.</span><span class="n">headless</span><span class="o">=</span><span class="n">true</span>
<span class="o">...</span>
<span class="n">DEBUG</span><span class="p">:</span><span class="n">weka</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">jvm</span><span class="p">:</span><span class="n">java</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">compressedOopsMode</span><span class="o">=</span><span class="n">Zero</span> <span class="n">based</span>
<span class="n">DEBUG</span><span class="p">:</span><span class="n">weka</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">jvm</span><span class="p">:</span><span class="n">java</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">specification</span><span class="o">.</span><span class="n">version</span><span class="o">=</span><span class="mi">11</span>
</pre></div>
</div>
<p>For more information, check out the help of the <cite>jvm</cite> module:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">jvm</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
<span class="n">help</span><span class="p">(</span><span class="n">jvm</span><span class="o">.</span><span class="n">stop</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="location-of-the-datasets">
<h2>Location of the datasets<a class="headerlink" href="#location-of-the-datasets" title="Permalink to this headline">¶</a></h2>
<p>The following examples assume the datasets to be present in the <cite>data_dir</cite> directory. For instance,
this could be the following directory:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data_dir</span> <span class="o">=</span> <span class="s2">&quot;/my/datasets/&quot;</span>
</pre></div>
</div>
</section>
<section id="load-dataset-and-print-it">
<h2>Load dataset and print it<a class="headerlink" href="#load-dataset-and-print-it" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">weka.core.converters</span> <span class="kn">import</span> <span class="n">Loader</span>
<span class="n">loader</span> <span class="o">=</span> <span class="n">Loader</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.core.converters.ArffLoader&quot;</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="n">data_dir</span> <span class="o">+</span> <span class="s2">&quot;iris.arff&quot;</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">class_is_last</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p>The <cite>weka.core.converters</cite> module has a convenience method for loading datasets
called <cite>load_any_file</cite>. This method determines a loader based on the file extension
and then loads the full dataset:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">weka.core.converters</span> <span class="k">as</span> <span class="nn">converters</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">converters</span><span class="o">.</span><span class="n">load_any_file</span><span class="p">(</span><span class="n">data_dir</span> <span class="o">+</span> <span class="s2">&quot;iris.arff&quot;</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">class_is_last</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p>It is also possible to define the class attribute when loading:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="n">data_dir</span> <span class="o">+</span> <span class="s2">&quot;iris.arff&quot;</span><span class="p">,</span> <span class="n">class_index</span><span class="o">=</span><span class="s2">&quot;last&quot;</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">converters</span><span class="o">.</span><span class="n">load_any_file</span><span class="p">(</span><span class="n">data_dir</span> <span class="o">+</span> <span class="s2">&quot;iris.arff&quot;</span><span class="p">,</span> <span class="n">class_index</span><span class="o">=</span><span class="s2">&quot;last&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The following strings are supported:</p>
<ul class="simple">
<li><p><cite>first</cite></p></li>
<li><p><cite>second</cite></p></li>
<li><p><cite>third</cite></p></li>
<li><p><cite>last-2</cite> (third to last)</p></li>
<li><p><cite>last-1</cite> (second to last)</p></li>
<li><p><cite>last</cite></p></li>
<li><p>any other string gets interpreted as 1-based index</p></li>
</ul>
</section>
<section id="create-dataset-manually">
<h2>Create dataset manually<a class="headerlink" href="#create-dataset-manually" title="Permalink to this headline">¶</a></h2>
<p>The following code snippet defines the dataset structure by creating its attributes and then the
dataset itself. Once the <cite>weka.core.dataset.Instances</cite> object is available, rows (i.e., <cite>weka.core.dataset.Instance</cite>
objects) can be added.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">weka.core.dataset</span> <span class="kn">import</span> <span class="n">Attribute</span><span class="p">,</span> <span class="n">Instance</span><span class="p">,</span> <span class="n">Instances</span>

<span class="c1"># create attributes</span>
<span class="n">num_att</span> <span class="o">=</span> <span class="n">Attribute</span><span class="o">.</span><span class="n">create_numeric</span><span class="p">(</span><span class="s2">&quot;num&quot;</span><span class="p">)</span>
<span class="n">date_att</span> <span class="o">=</span> <span class="n">Attribute</span><span class="o">.</span><span class="n">create_date</span><span class="p">(</span><span class="s2">&quot;dat&quot;</span><span class="p">,</span> <span class="s2">&quot;yyyy-MM-dd&quot;</span><span class="p">)</span>
<span class="n">nom_att</span> <span class="o">=</span> <span class="n">Attribute</span><span class="o">.</span><span class="n">create_nominal</span><span class="p">(</span><span class="s2">&quot;nom&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;label1&quot;</span><span class="p">,</span> <span class="s2">&quot;label2&quot;</span><span class="p">])</span>

<span class="c1"># create dataset</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">Instances</span><span class="o">.</span><span class="n">create_instances</span><span class="p">(</span><span class="s2">&quot;helloworld&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">num_att</span><span class="p">,</span> <span class="n">date_att</span><span class="p">,</span> <span class="n">nom_att</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>

<span class="c1"># add rows</span>
<span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="mf">3.1415926</span><span class="p">,</span> <span class="n">date_att</span><span class="o">.</span><span class="n">parse_date</span><span class="p">(</span><span class="s2">&quot;2014-04-10&quot;</span><span class="p">),</span> <span class="mf">1.0</span><span class="p">]</span>
<span class="n">inst</span> <span class="o">=</span> <span class="n">Instance</span><span class="o">.</span><span class="n">create_instance</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_instance</span><span class="p">(</span><span class="n">inst</span><span class="p">)</span>

<span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="mf">2.71828</span><span class="p">,</span> <span class="n">date_att</span><span class="o">.</span><span class="n">parse_date</span><span class="p">(</span><span class="s2">&quot;2014-08-09&quot;</span><span class="p">),</span> <span class="n">Instance</span><span class="o">.</span><span class="n">missing_value</span><span class="p">()]</span>
<span class="n">inst</span> <span class="o">=</span> <span class="n">Instance</span><span class="o">.</span><span class="n">create_instance</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_instance</span><span class="p">(</span><span class="n">inst</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="create-dataset-from-lists">
<h2>Create dataset from lists<a class="headerlink" href="#create-dataset-from-lists" title="Permalink to this headline">¶</a></h2>
<p>If your data is easily available as lists, you can also construct datasets using this approach (custom column names can be supplied via <cite>cols_x</cite> and <cite>col_y</cite>):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">weka.core.dataset</span> <span class="kn">import</span> <span class="n">create_instances_from_lists</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span>

<span class="c1"># pure numeric</span>
<span class="n">x</span> <span class="o">=</span> <span class="p">[[</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">create_instances_from_lists</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;generated from lists&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">create_instances_from_lists</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;generated from lists (no y)&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>

<span class="c1"># mixed data types</span>
<span class="n">x</span> <span class="o">=</span> <span class="p">[[</span><span class="s2">&quot;TEXT&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;XXX&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">2.2</span><span class="p">]]</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">]</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">create_instances_from_lists</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;generated from mixed lists&quot;</span><span class="p">,</span> <span class="n">cols_x</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">,</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span> <span class="s2">&quot;float&quot;</span><span class="p">],</span> <span class="n">col_y</span><span class="o">=</span><span class="s2">&quot;class&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="create-dataset-from-matrices">
<h2>Create dataset from matrices<a class="headerlink" href="#create-dataset-from-matrices" title="Permalink to this headline">¶</a></h2>
<p>Another way of constructing a dataset is to use numpy matrices/arrays, e.g., obtained from a Panda data frame (custom column names can be supplied via <cite>cols_x</cite> and <cite>col_y</cite>):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">weka.core.dataset</span> <span class="kn">import</span> <span class="n">create_instances_from_matrices</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># pure numeric</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">create_instances_from_matrices</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;generated from matrices&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">create_instances_from_matrices</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;generated from matrix (no y)&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>

<span class="c1"># mixed data types</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([(</span><span class="s2">&quot;TEXT&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;XXX&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">2.2</span><span class="p">)],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;S20, i4, f8&#39;</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;S20&#39;</span><span class="p">)</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">create_instances_from_matrices</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;generated from mixed matrices&quot;</span><span class="p">,</span> <span class="n">cols_x</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">,</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span> <span class="s2">&quot;float&quot;</span><span class="p">],</span> <span class="n">col_y</span><span class="o">=</span><span class="s2">&quot;class&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="dataset-subsets">
<h2>Dataset subsets<a class="headerlink" href="#dataset-subsets" title="Permalink to this headline">¶</a></h2>
<p>Transformations in Weka usually occur by applying filters (see section <em>Filters</em> below).
However, quite often one only wants to quickly create a subset (of colunms or rows) from a dataset.
For this purpose, the <cite>subset</cite> method of the <cite>weka.core.dataset.Instances</cite> method can be used
(it uses filters under the hood to generate the actual subset):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">weka.core.converters</span> <span class="kn">import</span> <span class="n">load_any_file</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">load_any_file</span><span class="p">(</span><span class="s2">&quot;/some/where/iris.arff&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">attribute_names</span><span class="p">(),</span> <span class="n">data</span><span class="o">.</span><span class="n">num_instances</span><span class="p">)</span>

<span class="c1"># select columns by name</span>
<span class="n">subset</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">subset</span><span class="p">(</span><span class="n">col_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;sepallength&#39;</span><span class="p">,</span> <span class="s1">&#39;sepalwidth&#39;</span><span class="p">,</span> <span class="s1">&#39;petallength&#39;</span><span class="p">,</span> <span class="s1">&#39;petalwidth&#39;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">subset</span><span class="o">.</span><span class="n">attribute_names</span><span class="p">(),</span> <span class="n">subset</span><span class="o">.</span><span class="n">num_instances</span><span class="p">)</span>

<span class="c1"># select columns by range (1-based indices)</span>
<span class="n">subset</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">subset</span><span class="p">(</span><span class="n">col_range</span><span class="o">=</span><span class="s1">&#39;1-3,5&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">subset</span><span class="o">.</span><span class="n">attribute_names</span><span class="p">(),</span> <span class="n">subset</span><span class="o">.</span><span class="n">num_instances</span><span class="p">)</span>

<span class="c1"># select rows by range (1-based indices)</span>
<span class="n">subset</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">subset</span><span class="p">(</span><span class="n">row_range</span><span class="o">=</span><span class="s1">&#39;51-150&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">subset</span><span class="o">.</span><span class="n">attribute_names</span><span class="p">(),</span> <span class="n">subset</span><span class="o">.</span><span class="n">num_instances</span><span class="p">)</span>

<span class="c1"># invert selection of cols/rows and keep original relation name</span>
<span class="n">subset</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">subset</span><span class="p">(</span><span class="n">col_range</span><span class="o">=</span><span class="s1">&#39;5&#39;</span><span class="p">,</span> <span class="n">invert_cols</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">row_range</span><span class="o">=</span><span class="s1">&#39;51-150&#39;</span><span class="p">,</span> <span class="n">invert_rows</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">keep_relationame</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">subset</span><span class="o">.</span><span class="n">attribute_names</span><span class="p">(),</span> <span class="n">subset</span><span class="o">.</span><span class="n">num_instances</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="data-generators">
<h2>Data generators<a class="headerlink" href="#data-generators" title="Permalink to this headline">¶</a></h2>
<p>Artifical data can be generated using one of Weka’s data generators, e.g., the
<cite>Agrawal</cite> classification generator:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">weka.datagenerators</span> <span class="kn">import</span> <span class="n">DataGenerator</span>
<span class="n">generator</span> <span class="o">=</span> <span class="n">DataGenerator</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.datagenerators.classifiers.classification.Agrawal&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;-B&quot;</span><span class="p">,</span> <span class="s2">&quot;-P&quot;</span><span class="p">,</span> <span class="s2">&quot;0.05&quot;</span><span class="p">])</span>
<span class="n">DataGenerator</span><span class="o">.</span><span class="n">make_data</span><span class="p">(</span><span class="n">generator</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;-o&quot;</span><span class="p">,</span> <span class="s2">&quot;/some/where/outputfile.arff&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>Or using the low-level API (outputting data to stdout):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">generator</span> <span class="o">=</span> <span class="n">DataGenerator</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.datagenerators.classifiers.classification.Agrawal&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;-n&quot;</span><span class="p">,</span> <span class="s2">&quot;10&quot;</span><span class="p">,</span> <span class="s2">&quot;-r&quot;</span><span class="p">,</span> <span class="s2">&quot;agrawal&quot;</span><span class="p">])</span>
<span class="n">generator</span><span class="o">.</span><span class="n">dataset_format</span> <span class="o">=</span> <span class="n">generator</span><span class="o">.</span><span class="n">define_data_format</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">generator</span><span class="o">.</span><span class="n">dataset_format</span><span class="p">)</span>
<span class="k">if</span> <span class="n">generator</span><span class="o">.</span><span class="n">single_mode_flag</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">generator</span><span class="o">.</span><span class="n">num_examples_act</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">generator</span><span class="o">.</span><span class="n">generate_example</span><span class="p">())</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">generator</span><span class="o">.</span><span class="n">generate_examples</span><span class="p">())</span>
</pre></div>
</div>
</section>
<section id="filters">
<h2>Filters<a class="headerlink" href="#filters" title="Permalink to this headline">¶</a></h2>
<p>The <cite>Filter</cite> class from the <cite>weka.filters</cite> module allows you to filter datasets, e.g.,
removing the last attribute using the <cite>Remove</cite> filter:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="n">data_dir</span> <span class="o">+</span> <span class="s2">&quot;vote.arff&quot;</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">weka.filters</span> <span class="kn">import</span> <span class="n">Filter</span>
<span class="n">remove</span> <span class="o">=</span> <span class="n">Filter</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.filters.unsupervised.attribute.Remove&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;-R&quot;</span><span class="p">,</span> <span class="s2">&quot;last&quot;</span><span class="p">])</span>
<span class="n">remove</span><span class="o">.</span><span class="n">inputformat</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">filtered</span> <span class="o">=</span> <span class="n">remove</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">filtered</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="output-help-from-underlying-optionhandler">
<h2>Output help from underlying OptionHandler<a class="headerlink" href="#output-help-from-underlying-optionhandler" title="Permalink to this headline">¶</a></h2>
<p>If the underlying Java class implements the <code class="docutils literal notranslate"><span class="pre">weka.core.OptionHandler</span></code> method, then
you can use the <code class="docutils literal notranslate"><span class="pre">to_help()</span></code> method to generate a string containing the <code class="docutils literal notranslate"><span class="pre">globalInfo()</span></code>
and <code class="docutils literal notranslate"><span class="pre">listOptions()</span></code> information:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">weka.classifiers</span> <span class="kn">import</span> <span class="n">Classifier</span>
<span class="bp">cls</span> <span class="o">=</span> <span class="n">Classifier</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.classifiers.trees.J48&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">to_help</span><span class="p">())</span>
</pre></div>
</div>
</section>
<section id="option-handling">
<h2>Option handling<a class="headerlink" href="#option-handling" title="Permalink to this headline">¶</a></h2>
<p>Any class derived from <code class="docutils literal notranslate"><span class="pre">OptionHandler</span></code> (module <code class="docutils literal notranslate"><span class="pre">weka.core.classes</span></code>) allows
getting and setting of the options via the property <code class="docutils literal notranslate"><span class="pre">options</span></code>. Depending on
the sub-class, you may also provide the options already when instantiating the
class. The following two examples instantiate a J48 classifier, one using
the <code class="docutils literal notranslate"><span class="pre">options</span></code> property and the other using the shortcut through the constructor:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">weka.classifiers</span> <span class="kn">import</span> <span class="n">Classifier</span>
<span class="bp">cls</span> <span class="o">=</span> <span class="n">Classifier</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.classifiers.trees.J48&quot;</span><span class="p">)</span>
<span class="bp">cls</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;-C&quot;</span><span class="p">,</span> <span class="s2">&quot;0.3&quot;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">weka.classifiers</span> <span class="kn">import</span> <span class="n">Classifier</span>
<span class="bp">cls</span> <span class="o">=</span> <span class="n">Classifier</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.classifiers.trees.J48&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;-C&quot;</span><span class="p">,</span> <span class="s2">&quot;0.3&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">options</span></code> property also to retrieve the currently set options:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">weka.classifiers</span> <span class="kn">import</span> <span class="n">Classifier</span>
<span class="bp">cls</span> <span class="o">=</span> <span class="n">Classifier</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.classifiers.trees.J48&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;-C&quot;</span><span class="p">,</span> <span class="s2">&quot;0.3&quot;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">options</span><span class="p">)</span>
</pre></div>
</div>
<p>Using the <cite>to_commandline()</cite> method, you can return a single string that contains
classname and options, just like Weka’s Explorer does when copying the setup to
the clipboard:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">weka.classifiers</span> <span class="kn">import</span> <span class="n">Classifier</span>
<span class="bp">cls</span> <span class="o">=</span> <span class="n">Classifier</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.classifiers.trees.J48&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;-C&quot;</span><span class="p">,</span> <span class="s2">&quot;0.3&quot;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">to_commandline</span><span class="p">())</span>
</pre></div>
</div>
<p>The <cite>to_commandline(…)</cite> method of the <cite>weka.core.classes</cite> module generates
the command-line string for any class that implements the <cite>weka.core.OptionHandler</cite>
Java interface under the hood (a lot of classes do!):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">weka.classifiers</span> <span class="kn">import</span> <span class="n">Classifier</span>
<span class="kn">from</span> <span class="nn">weka.core.classes</span> <span class="kn">import</span> <span class="n">to_commandline</span>
<span class="bp">cls</span> <span class="o">=</span> <span class="n">Classifier</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.classifiers.trees.J48&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;-C&quot;</span><span class="p">,</span> <span class="s2">&quot;0.3&quot;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">to_commandline</span><span class="p">(</span><span class="bp">cls</span><span class="p">))</span>
</pre></div>
</div>
<p>The reverse, generating an object from a command-line, is done via the
<cite>from_commandline(…)</cite> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cmdline</span> <span class="o">=</span> <span class="s1">&#39;weka.classifiers.functions.SMO -K &quot;weka.classifiers.functions.supportVector.NormalizedPolyKernel -E 3.0&quot;&#39;</span>
<span class="n">classifier</span> <span class="o">=</span> <span class="n">from_commandline</span><span class="p">(</span><span class="n">cmdline</span><span class="p">,</span> <span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.classifiers.Classifier&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="build-classifier-on-dataset-output-predictions">
<h2>Build classifier on dataset, output predictions<a class="headerlink" href="#build-classifier-on-dataset-output-predictions" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">weka.classifiers</span> <span class="kn">import</span> <span class="n">Classifier</span>
<span class="bp">cls</span> <span class="o">=</span> <span class="n">Classifier</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.classifiers.trees.J48&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;-C&quot;</span><span class="p">,</span> <span class="s2">&quot;0.3&quot;</span><span class="p">])</span>
<span class="bp">cls</span><span class="o">.</span><span class="n">build_classifier</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">inst</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="n">pred</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">classify_instance</span><span class="p">(</span><span class="n">inst</span><span class="p">)</span>
    <span class="n">dist</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">distribution_for_instance</span><span class="p">(</span><span class="n">inst</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;: label index=&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">pred</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;, class distribution=&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">dist</span><span class="p">))</span>
</pre></div>
</div>
</section>
<section id="build-classifier-on-dataset-print-model-and-draw-graph">
<h2>Build classifier on dataset, print model and draw graph<a class="headerlink" href="#build-classifier-on-dataset-print-model-and-draw-graph" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">weka.classifiers</span> <span class="kn">import</span> <span class="n">Classifier</span>
<span class="bp">cls</span> <span class="o">=</span> <span class="n">Classifier</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.classifiers.trees.J48&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;-C&quot;</span><span class="p">,</span> <span class="s2">&quot;0.3&quot;</span><span class="p">])</span>
<span class="bp">cls</span><span class="o">.</span><span class="n">build_classifier</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">weka.plot.graph</span> <span class="k">as</span> <span class="nn">graph</span>  <span class="c1"># NB: pygraphviz and PIL are required</span>
<span class="n">graph</span><span class="o">.</span><span class="n">plot_dot_graph</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">graph</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="build-classifier-incrementally-with-data-and-print-model">
<h2>Build classifier incrementally with data and print model<a class="headerlink" href="#build-classifier-incrementally-with-data-and-print-model" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">loader</span> <span class="o">=</span> <span class="n">Loader</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.core.converters.ArffLoader&quot;</span><span class="p">)</span>
<span class="n">iris_inc</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="n">data_dir</span> <span class="o">+</span> <span class="s2">&quot;iris.arff&quot;</span><span class="p">,</span> <span class="n">incremental</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">iris_inc</span><span class="o">.</span><span class="n">class_is_last</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">iris_inc</span><span class="p">)</span>

<span class="bp">cls</span> <span class="o">=</span> <span class="n">Classifier</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.classifiers.bayes.NaiveBayesUpdateable&quot;</span><span class="p">)</span>
<span class="bp">cls</span><span class="o">.</span><span class="n">build_classifier</span><span class="p">(</span><span class="n">iris_inc</span><span class="p">)</span>
<span class="k">for</span> <span class="n">inst</span> <span class="ow">in</span> <span class="n">loader</span><span class="p">:</span>
    <span class="bp">cls</span><span class="o">.</span><span class="n">update_classifier</span><span class="p">(</span><span class="n">inst</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="cross-validate-filtered-classifier-and-print-evaluation-and-display-roc">
<h2>Cross-validate filtered classifier and print evaluation and display ROC<a class="headerlink" href="#cross-validate-filtered-classifier-and-print-evaluation-and-display-roc" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="n">data_dir</span> <span class="o">+</span> <span class="s2">&quot;diabetes.arff&quot;</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">class_is_last</span><span class="p">()</span>

<span class="kn">from</span> <span class="nn">weka.filters</span> <span class="kn">import</span> <span class="n">Filter</span>
<span class="n">remove</span> <span class="o">=</span> <span class="n">Filter</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.filters.unsupervised.attribute.Remove&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;-R&quot;</span><span class="p">,</span> <span class="s2">&quot;1-3&quot;</span><span class="p">])</span>

<span class="bp">cls</span> <span class="o">=</span> <span class="n">Classifier</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.classifiers.bayes.NaiveBayes&quot;</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">weka.classifiers</span> <span class="kn">import</span> <span class="n">FilteredClassifier</span>
<span class="n">fc</span> <span class="o">=</span> <span class="n">FilteredClassifier</span><span class="p">()</span>
<span class="n">fc</span><span class="o">.</span><span class="n">filter</span> <span class="o">=</span> <span class="n">remove</span>
<span class="n">fc</span><span class="o">.</span><span class="n">classifier</span> <span class="o">=</span> <span class="bp">cls</span>

<span class="kn">from</span> <span class="nn">weka.classifiers</span> <span class="kn">import</span> <span class="n">Evaluation</span>
<span class="kn">from</span> <span class="nn">weka.core.classes</span> <span class="kn">import</span> <span class="n">Random</span>
<span class="n">evl</span> <span class="o">=</span> <span class="n">Evaluation</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">evl</span><span class="o">.</span><span class="n">crossvalidate_model</span><span class="p">(</span><span class="n">fc</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">Random</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="n">evl</span><span class="o">.</span><span class="n">percent_correct</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">evl</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">evl</span><span class="o">.</span><span class="n">class_details</span><span class="p">())</span>

<span class="kn">import</span> <span class="nn">weka.plot.classifiers</span> <span class="k">as</span> <span class="nn">plcls</span>  <span class="c1"># NB: matplotlib is required</span>
<span class="n">plcls</span><span class="o">.</span><span class="n">plot_roc</span><span class="p">(</span><span class="n">evl</span><span class="p">,</span> <span class="n">class_index</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="cross-validate-regressor-display-classifier-errors-and-predictions">
<h2>Cross-validate regressor, display classifier errors and predictions<a class="headerlink" href="#cross-validate-regressor-display-classifier-errors-and-predictions" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">weka.classifiers</span> <span class="kn">import</span> <span class="n">PredictionOutput</span><span class="p">,</span> <span class="n">KernelClassifier</span><span class="p">,</span> <span class="n">Kernel</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="n">data_dir</span> <span class="o">+</span> <span class="s2">&quot;bolts.arff&quot;</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">class_is_last</span><span class="p">()</span>

<span class="bp">cls</span> <span class="o">=</span> <span class="n">KernelClassifier</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.classifiers.functions.SMOreg&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;-N&quot;</span><span class="p">,</span> <span class="s2">&quot;0&quot;</span><span class="p">])</span>
<span class="n">kernel</span> <span class="o">=</span> <span class="n">Kernel</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.classifiers.functions.supportVector.RBFKernel&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;-G&quot;</span><span class="p">,</span> <span class="s2">&quot;0.1&quot;</span><span class="p">])</span>
<span class="bp">cls</span><span class="o">.</span><span class="n">kernel</span> <span class="o">=</span> <span class="n">kernel</span>
<span class="n">pout</span> <span class="o">=</span> <span class="n">PredictionOutput</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.classifiers.evaluation.output.prediction.PlainText&quot;</span><span class="p">)</span>
<span class="n">evl</span> <span class="o">=</span> <span class="n">Evaluation</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">evl</span><span class="o">.</span><span class="n">crossvalidate_model</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">Random</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">pout</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">evl</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pout</span><span class="o">.</span><span class="n">buffer_content</span><span class="p">())</span>

<span class="kn">import</span> <span class="nn">weka.plot.classifiers</span> <span class="k">as</span> <span class="nn">plcls</span>  <span class="c1"># NB: matplotlib is required</span>
<span class="n">plcls</span><span class="o">.</span><span class="n">plot_classifier_errors</span><span class="p">(</span><span class="n">evl</span><span class="o">.</span><span class="n">predictions</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="parameter-optimization-property-names">
<h2>Parameter optimization - property names<a class="headerlink" href="#parameter-optimization-property-names" title="Permalink to this headline">¶</a></h2>
<p>Both, <cite>GridSearch</cite> and <cite>MultiSearch</cite>, use Java Bean property names (and paths consisting of these),
not command-line options in order to get/set the parameters under optimization.
Using the <cite>list_property_names</cite> method of the <cite>weka.core.classes</cite> module, you can list the
properties from a Java object:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">weka.core.classes</span> <span class="kn">import</span> <span class="n">list_property_names</span>
<span class="bp">cls</span> <span class="o">=</span> <span class="n">Classifier</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span> <span class="s2">&quot;weka.classifiers.trees.J48&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">list_property_names</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="parameter-optimization-gridsearch">
<h2>Parameter optimization - GridSearch<a class="headerlink" href="#parameter-optimization-gridsearch" title="Permalink to this headline">¶</a></h2>
<p>The following code optimizes the <cite>C</cite> property of <cite>SMOreg</cite> and the <cite>gamma</cite> property of its <cite>RBFKernel</cite>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">weka.classifiers</span> <span class="kn">import</span> <span class="n">GridSearch</span>
<span class="n">grid</span> <span class="o">=</span> <span class="n">GridSearch</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;-sample-size&quot;</span><span class="p">,</span> <span class="s2">&quot;100.0&quot;</span><span class="p">,</span> <span class="s2">&quot;-traversal&quot;</span><span class="p">,</span> <span class="s2">&quot;ROW-WISE&quot;</span><span class="p">,</span> <span class="s2">&quot;-num-slots&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;-S&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">])</span>
<span class="n">grid</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="s2">&quot;CC&quot;</span>
<span class="n">grid</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;property&quot;</span><span class="p">:</span> <span class="s2">&quot;kernel.gamma&quot;</span><span class="p">,</span> <span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">3.0</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">:</span> <span class="mf">3.0</span><span class="p">,</span> <span class="s2">&quot;step&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s2">&quot;base&quot;</span><span class="p">:</span> <span class="mf">10.0</span><span class="p">,</span> <span class="s2">&quot;expression&quot;</span><span class="p">:</span> <span class="s2">&quot;pow(BASE,I)&quot;</span><span class="p">}</span>
<span class="n">grid</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;property&quot;</span><span class="p">:</span> <span class="s2">&quot;C&quot;</span><span class="p">,</span> <span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">3.0</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">:</span> <span class="mf">3.0</span><span class="p">,</span> <span class="s2">&quot;step&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s2">&quot;base&quot;</span><span class="p">:</span> <span class="mf">10.0</span><span class="p">,</span> <span class="s2">&quot;expression&quot;</span><span class="p">:</span> <span class="s2">&quot;pow(BASE,I)&quot;</span><span class="p">}</span>
<span class="bp">cls</span> <span class="o">=</span> <span class="n">Classifier</span><span class="p">(</span>
    <span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.classifiers.functions.SMOreg&quot;</span><span class="p">,</span>
    <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;-K&quot;</span><span class="p">,</span> <span class="s2">&quot;weka.classifiers.functions.supportVector.RBFKernel&quot;</span><span class="p">])</span>
<span class="n">grid</span><span class="o">.</span><span class="n">classifier</span> <span class="o">=</span> <span class="bp">cls</span>
<span class="n">grid</span><span class="o">.</span><span class="n">build_classifier</span><span class="p">(</span><span class="n">train</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Model:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">grid</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Best setup:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">grid</span><span class="o">.</span><span class="n">best</span><span class="o">.</span><span class="n">to_commandline</span><span class="p">())</span>
</pre></div>
</div>
<p><strong>NB:</strong> The <cite>gridSearch</cite> package must be installed for this to work.</p>
</section>
<section id="parameter-optimization-multisearch">
<h2>Parameter optimization - MultiSearch<a class="headerlink" href="#parameter-optimization-multisearch" title="Permalink to this headline">¶</a></h2>
<p>The following code optimizes the <cite>C</cite> property of <cite>SMOreg</cite> and the <cite>gamma</cite> property of its <cite>RBFKernel</cite>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">weka.core.classes</span> <span class="kn">import</span> <span class="n">ListParameter</span><span class="p">,</span> <span class="n">MathParameter</span>
<span class="n">multi</span> <span class="o">=</span> <span class="n">MultiSearch</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;-S&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">])</span>
<span class="n">multi</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="s2">&quot;CC&quot;</span>
<span class="n">mparam</span> <span class="o">=</span> <span class="n">MathParameter</span><span class="p">()</span>
<span class="n">mparam</span><span class="o">.</span><span class="n">prop</span> <span class="o">=</span> <span class="s2">&quot;kernel.gamma&quot;</span>
<span class="n">mparam</span><span class="o">.</span><span class="n">minimum</span> <span class="o">=</span> <span class="o">-</span><span class="mf">3.0</span>
<span class="n">mparam</span><span class="o">.</span><span class="n">maximum</span> <span class="o">=</span> <span class="mf">3.0</span>
<span class="n">mparam</span><span class="o">.</span><span class="n">step</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">mparam</span><span class="o">.</span><span class="n">base</span> <span class="o">=</span> <span class="mf">10.0</span>
<span class="n">mparam</span><span class="o">.</span><span class="n">expression</span> <span class="o">=</span> <span class="s2">&quot;pow(BASE,I)&quot;</span>
<span class="n">lparam</span> <span class="o">=</span> <span class="n">ListParameter</span><span class="p">()</span>
<span class="n">lparam</span><span class="o">.</span><span class="n">prop</span> <span class="o">=</span> <span class="s2">&quot;C&quot;</span>
<span class="n">lparam</span><span class="o">.</span><span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;-2.0&quot;</span><span class="p">,</span> <span class="s2">&quot;-1.0&quot;</span><span class="p">,</span> <span class="s2">&quot;0.0&quot;</span><span class="p">,</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span> <span class="s2">&quot;2.0&quot;</span><span class="p">]</span>
<span class="n">multi</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="n">mparam</span><span class="p">,</span> <span class="n">lparam</span><span class="p">]</span>
<span class="bp">cls</span> <span class="o">=</span> <span class="n">Classifier</span><span class="p">(</span>
    <span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.classifiers.functions.SMOreg&quot;</span><span class="p">,</span>
    <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;-K&quot;</span><span class="p">,</span> <span class="s2">&quot;weka.classifiers.functions.supportVector.RBFKernel&quot;</span><span class="p">])</span>
<span class="n">multi</span><span class="o">.</span><span class="n">classifier</span> <span class="o">=</span> <span class="bp">cls</span>
<span class="n">multi</span><span class="o">.</span><span class="n">build_classifier</span><span class="p">(</span><span class="n">train</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Model:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">multi</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Best setup:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">multi</span><span class="o">.</span><span class="n">best</span><span class="o">.</span><span class="n">to_commandline</span><span class="p">())</span>
</pre></div>
</div>
<p><strong>NB:</strong> The <a class="reference external" href="https://github.com/fracpete/multisearch-weka-package">multisearch-weka-package</a> package must
be installed for this to work.</p>
</section>
<section id="clustering">
<h2>Clustering<a class="headerlink" href="#clustering" title="Permalink to this headline">¶</a></h2>
<p>In the following is an example on how to build a <cite>SimpleKMeans</cite> (with 3 clusters)
using a previously loaded dataset without a class attribute:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="n">data_dir</span> <span class="o">+</span> <span class="s2">&quot;vote.arff&quot;</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">delete_last_attribute</span><span class="p">()</span>

<span class="kn">from</span> <span class="nn">weka.clusterers</span> <span class="kn">import</span> <span class="n">Clusterer</span>
<span class="n">clusterer</span> <span class="o">=</span> <span class="n">Clusterer</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.clusterers.SimpleKMeans&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;-N&quot;</span><span class="p">,</span> <span class="s2">&quot;3&quot;</span><span class="p">])</span>
<span class="n">clusterer</span><span class="o">.</span><span class="n">build_clusterer</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">clusterer</span><span class="p">)</span>
</pre></div>
</div>
<p>Once a clusterer is built, it can be used to cluster Instance objects:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># cluster the data</span>
<span class="k">for</span> <span class="n">inst</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
    <span class="n">cl</span> <span class="o">=</span> <span class="n">clusterer</span><span class="o">.</span><span class="n">cluster_instance</span><span class="p">(</span><span class="n">inst</span><span class="p">)</span>  <span class="c1"># 0-based cluster index</span>
    <span class="n">dist</span> <span class="o">=</span> <span class="n">clusterer</span><span class="o">.</span><span class="n">distribution_for_instance</span><span class="p">(</span><span class="n">inst</span><span class="p">)</span>   <span class="c1"># cluster membership distribution</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;cluster=&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">cl</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;, distribution=&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">dist</span><span class="p">))</span>
</pre></div>
</div>
</section>
<section id="associations">
<h2>Associations<a class="headerlink" href="#associations" title="Permalink to this headline">¶</a></h2>
<p>Associators, like <cite>Apriori</cite>, can be built and output like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="n">data_dir</span> <span class="o">+</span> <span class="s2">&quot;vote.arff&quot;</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">class_is_last</span><span class="p">()</span>

<span class="kn">from</span> <span class="nn">weka.associations</span> <span class="kn">import</span> <span class="n">Associator</span>
<span class="n">associator</span> <span class="o">=</span> <span class="n">Associator</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.associations.Apriori&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;-N&quot;</span><span class="p">,</span> <span class="s2">&quot;9&quot;</span><span class="p">,</span> <span class="s2">&quot;-I&quot;</span><span class="p">])</span>
<span class="n">associator</span><span class="o">.</span><span class="n">build_associations</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">associator</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="attribute-selection">
<h2>Attribute selection<a class="headerlink" href="#attribute-selection" title="Permalink to this headline">¶</a></h2>
<p>You can perform attribute selection using, e.g., <cite>BestFirst</cite> as search algorithm and
<cite>CfsSubsetEval</cite> as evaluator as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="n">data_dir</span> <span class="o">+</span> <span class="s2">&quot;vote.arff&quot;</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">class_is_last</span><span class="p">()</span>

<span class="kn">from</span> <span class="nn">weka.attribute_selection</span> <span class="kn">import</span> <span class="n">ASSearch</span><span class="p">,</span> <span class="n">ASEvaluation</span><span class="p">,</span> <span class="n">AttributeSelection</span>
<span class="n">search</span> <span class="o">=</span> <span class="n">ASSearch</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.attributeSelection.BestFirst&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;-D&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;-N&quot;</span><span class="p">,</span> <span class="s2">&quot;5&quot;</span><span class="p">])</span>
<span class="n">evaluator</span> <span class="o">=</span> <span class="n">ASEvaluation</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.attributeSelection.CfsSubsetEval&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;-P&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;-E&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">])</span>
<span class="n">attsel</span> <span class="o">=</span> <span class="n">AttributeSelection</span><span class="p">()</span>
<span class="n">attsel</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">search</span><span class="p">)</span>
<span class="n">attsel</span><span class="o">.</span><span class="n">evaluator</span><span class="p">(</span><span class="n">evaluator</span><span class="p">)</span>
<span class="n">attsel</span><span class="o">.</span><span class="n">select_attributes</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;# attributes: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">attsel</span><span class="o">.</span><span class="n">number_attributes_selected</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;attributes: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">attsel</span><span class="o">.</span><span class="n">selected_attributes</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;result string:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">attsel</span><span class="o">.</span><span class="n">results_string</span><span class="p">)</span>
</pre></div>
</div>
<p>Attribute selection is also available through meta-schemes:</p>
<ul class="simple">
<li><p>classifier: <cite>weka.classifiers.AttributeSelectedClassifier</cite></p></li>
<li><p>filter: <cite>weka.filters.AttributeSelection</cite></p></li>
</ul>
</section>
<section id="timeseries">
<h2>Timeseries<a class="headerlink" href="#timeseries" title="Permalink to this headline">¶</a></h2>
<p>With the <cite>timeseriesForecasting</cite> package installed and the JVM started with package support, you can perform
timeseries forecasting:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">airline_data</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="n">data_dir</span> <span class="o">+</span> <span class="s2">&quot;airline.arff&quot;</span><span class="p">)</span>
<span class="n">airline_train</span><span class="p">,</span> <span class="n">airline_test</span> <span class="o">=</span> <span class="n">airline_data</span><span class="o">.</span><span class="n">train_test_split</span><span class="p">(</span><span class="mf">90.0</span><span class="p">)</span>

<span class="c1"># configure and build</span>
<span class="kn">from</span> <span class="nn">weka.timeseries</span> <span class="kn">import</span> <span class="n">WekaForecaster</span>
<span class="kn">from</span> <span class="nn">weka.classifiers</span> <span class="kn">import</span> <span class="n">Classifier</span>
<span class="n">forecaster</span> <span class="o">=</span> <span class="n">WekaForecaster</span><span class="p">()</span>
<span class="n">forecaster</span><span class="o">.</span><span class="n">fields_to_forecast</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;passenger_numbers&quot;</span><span class="p">]</span>
<span class="n">forecaster</span><span class="o">.</span><span class="n">base_forecaster</span> <span class="o">=</span> <span class="n">Classifier</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.classifiers.functions.LinearRegression&quot;</span><span class="p">)</span>
<span class="n">forecaster</span><span class="o">.</span><span class="n">fields_to_forecast</span> <span class="o">=</span> <span class="s2">&quot;passenger_numbers&quot;</span>
<span class="n">forecaster</span><span class="o">.</span><span class="n">build_forecaster</span><span class="p">(</span><span class="n">airline_train</span><span class="p">)</span>

<span class="c1"># prime</span>
<span class="kn">from</span> <span class="nn">weka.core.dataset</span> <span class="kn">import</span> <span class="n">Instances</span>
<span class="n">num_prime_instances</span> <span class="o">=</span> <span class="mi">12</span>
<span class="n">airline_prime</span> <span class="o">=</span> <span class="n">Instances</span><span class="o">.</span><span class="n">copy_instances</span><span class="p">(</span><span class="n">airline_train</span><span class="p">,</span> <span class="n">airline_train</span><span class="o">.</span><span class="n">num_instances</span> <span class="o">-</span> <span class="n">num_prime_instances</span><span class="p">,</span> <span class="n">num_prime_instances</span><span class="p">)</span>
<span class="n">forecaster</span><span class="o">.</span><span class="n">prime_forecaster</span><span class="p">(</span><span class="n">airline_prime</span><span class="p">)</span>

<span class="c1"># forecast</span>
<span class="n">num_future_forecasts</span> <span class="o">=</span> <span class="n">airline_test</span><span class="o">.</span><span class="n">num_instances</span>
<span class="n">preds</span> <span class="o">=</span> <span class="n">forecaster</span><span class="o">.</span><span class="n">forecast</span><span class="p">(</span><span class="n">num_future_forecasts</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Actual,Predicted,Error&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_future_forecasts</span><span class="p">):</span>
    <span class="n">actual</span> <span class="o">=</span> <span class="n">airline_test</span><span class="o">.</span><span class="n">get_instance</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">predicted</span> <span class="o">=</span> <span class="n">preds</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">predicted</span>
    <span class="n">error</span> <span class="o">=</span> <span class="n">actual</span> <span class="o">-</span> <span class="n">predicted</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%f</span><span class="s2">,</span><span class="si">%f</span><span class="s2">,</span><span class="si">%f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">actual</span><span class="p">,</span> <span class="n">predicted</span><span class="p">,</span> <span class="n">error</span><span class="p">))</span>
</pre></div>
</div>
</section>
<section id="serialization">
<h2>Serialization<a class="headerlink" href="#serialization" title="Permalink to this headline">¶</a></h2>
<p>You can easily serialize and de-serialize as well.</p>
<p>Here we just save a trained classifier to a file, load it again from disk and output the model:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">weka.classifiers</span> <span class="kn">import</span> <span class="n">Classifier</span>
<span class="n">classifier</span> <span class="o">=</span> <span class="o">...</span>  <span class="c1"># previously built classifier</span>
<span class="n">classifier</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="s2">&quot;/some/where/out.model&quot;</span><span class="p">)</span>
<span class="o">...</span>
<span class="n">classifier2</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">Classifier</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="s2">&quot;/some/where/out.model&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">classifier2</span><span class="p">)</span>
</pre></div>
</div>
<p>Weka usually saves the header of the dataset that was used for training as well (e.g., in order to determine
whether test data is compatible). This is done as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">weka.classifiers</span> <span class="kn">import</span> <span class="n">Classifier</span>
<span class="n">classifier</span> <span class="o">=</span> <span class="o">...</span>  <span class="c1"># previously built Classifier</span>
<span class="n">data</span> <span class="o">=</span> <span class="o">...</span> <span class="c1"># previously loaded/generated Instances</span>
<span class="n">classifier</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="s2">&quot;/some/where/out.model&quot;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
<span class="o">...</span>
<span class="n">classifier2</span><span class="p">,</span> <span class="n">data2</span> <span class="o">=</span> <span class="n">Classifier</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="s2">&quot;/some/where/out.model&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">classifier2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data2</span><span class="p">)</span>
</pre></div>
</div>
<p>Clusterers and filters offer the <cite>serialize</cite> and <cite>deserialize</cite> methods as well. For all other
serialization/deserialiation tasks, use the methods offered by the <cite>weka.core.classes</cite> module:</p>
<ul class="simple">
<li><p><cite>serialization_write(file, object)</cite></p></li>
<li><p><cite>serialization_write_all(file, [obj1, obj2, …])</cite></p></li>
<li><p><cite>serialization_read(file)</cite></p></li>
<li><p><cite>serialization_read_all(file)</cite></p></li>
</ul>
</section>
<section id="experiments">
<h2>Experiments<a class="headerlink" href="#experiments" title="Permalink to this headline">¶</a></h2>
<p>Experiments, like they are run in Weka’s Experimenter, can be configured and executed as well.</p>
<p>Here is an example for performing a cross-validated classification experiment:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">datasets</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">data_dir</span> <span class="o">+</span> <span class="s2">&quot;iris.arff&quot;</span><span class="p">,</span>
    <span class="n">data_dir</span> <span class="o">+</span> <span class="s2">&quot;vote.arff&quot;</span><span class="p">,</span>
    <span class="n">data_dir</span> <span class="o">+</span> <span class="s2">&quot;anneal.arff&quot;</span>
<span class="p">]</span>
<span class="n">classifiers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">Classifier</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.classifiers.rules.ZeroR&quot;</span><span class="p">),</span>
    <span class="n">Classifier</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.classifiers.trees.J48&quot;</span><span class="p">),</span>
    <span class="n">Classifier</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.classifiers.trees.REPTree&quot;</span><span class="p">),</span>
<span class="p">]</span>
<span class="n">result</span> <span class="o">=</span> <span class="s2">&quot;exp.arff&quot;</span>
<span class="kn">from</span> <span class="nn">weka.experiments</span> <span class="kn">import</span> <span class="n">SimpleCrossValidationExperiment</span>
<span class="n">exp</span> <span class="o">=</span> <span class="n">SimpleCrossValidationExperiment</span><span class="p">(</span>
    <span class="n">classification</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">runs</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">folds</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">datasets</span><span class="o">=</span><span class="n">datasets</span><span class="p">,</span>
    <span class="n">classifiers</span><span class="o">=</span><span class="n">classifiers</span><span class="p">,</span>
    <span class="n">result</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>
<span class="n">exp</span><span class="o">.</span><span class="n">setup</span><span class="p">()</span>
<span class="n">exp</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

<span class="kn">import</span> <span class="nn">weka.core.converters</span>
<span class="n">loader</span> <span class="o">=</span> <span class="n">weka</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">converters</span><span class="o">.</span><span class="n">loader_for_file</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">weka.experiments</span> <span class="kn">import</span> <span class="n">Tester</span><span class="p">,</span> <span class="n">ResultMatrix</span>
<span class="n">matrix</span> <span class="o">=</span> <span class="n">ResultMatrix</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.experiment.ResultMatrixPlainText&quot;</span><span class="p">)</span>
<span class="n">tester</span> <span class="o">=</span> <span class="n">Tester</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.experiment.PairedCorrectedTTester&quot;</span><span class="p">)</span>
<span class="n">tester</span><span class="o">.</span><span class="n">resultmatrix</span> <span class="o">=</span> <span class="n">matrix</span>
<span class="n">comparison_col</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">attribute_by_name</span><span class="p">(</span><span class="s2">&quot;Percent_correct&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">index</span>
<span class="n">tester</span><span class="o">.</span><span class="n">instances</span> <span class="o">=</span> <span class="n">data</span>

<span class="nb">print</span><span class="p">(</span><span class="n">tester</span><span class="o">.</span><span class="n">header</span><span class="p">(</span><span class="n">comparison_col</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tester</span><span class="o">.</span><span class="n">multi_resultset_full</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">comparison_col</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tester</span><span class="o">.</span><span class="n">multi_resultset_full</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">comparison_col</span><span class="p">))</span>
</pre></div>
</div>
<p>Other parameters that can be supplied to the constructor of the <cite>SimpleCrossValidationExperiment</cite> or
<cite>SimpleRandomSplitExperiment</cite> classes:</p>
<ul class="simple">
<li><p><cite>class_for_ir_statistics</cite> - defines the class label to use for computing IR statistics like AUC</p></li>
<li><p><cite>attribute_id</cite> - the 0-based index of the attribute that identifies rows</p></li>
<li><p><cite>pred_target_column</cite> - for outputting the predictions and ground truth in separate columns in case of classification, e.g., for calculating confusion matrices manually afterwards</p></li>
</ul>
<p>And a setup for performing regression experiments on random splits on the datasets:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">weka.experiments</span> <span class="kn">import</span> <span class="n">SimpleCrossValidationExperiment</span><span class="p">,</span> <span class="n">SimpleRandomSplitExperiment</span><span class="p">,</span> <span class="n">Tester</span><span class="p">,</span> <span class="n">ResultMatrix</span>
<span class="kn">from</span> <span class="nn">weka.classifiers</span> <span class="kn">import</span> <span class="n">Classifier</span>
<span class="kn">import</span> <span class="nn">weka.core.converters</span> <span class="k">as</span> <span class="nn">converters</span>
<span class="c1"># configure experiment</span>
<span class="n">datasets</span> <span class="o">=</span> <span class="p">[</span><span class="n">data_dir</span> <span class="o">+</span> <span class="s2">&quot;bolts.arff&quot;</span><span class="p">,</span> <span class="n">data_dir</span> <span class="o">+</span> <span class="s2">&quot;bodyfat.arff&quot;</span><span class="p">]</span>
<span class="n">classifiers</span> <span class="o">=</span> <span class="p">[</span><span class="n">Classifier</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.classifiers.rules.ZeroR&quot;</span><span class="p">),</span> <span class="n">Classifier</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.classifiers.functions.LinearRegression&quot;</span><span class="p">)]</span>
<span class="n">outfile</span> <span class="o">=</span> <span class="s2">&quot;results-rs.arff&quot;</span>   <span class="c1"># store results for later analysis</span>
<span class="n">exp</span> <span class="o">=</span> <span class="n">SimpleRandomSplitExperiment</span><span class="p">(</span>
    <span class="n">classification</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">runs</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">percentage</span><span class="o">=</span><span class="mf">66.6</span><span class="p">,</span>
    <span class="n">preserve_order</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">datasets</span><span class="o">=</span><span class="n">datasets</span><span class="p">,</span>
    <span class="n">classifiers</span><span class="o">=</span><span class="n">classifiers</span><span class="p">,</span>
    <span class="n">result</span><span class="o">=</span><span class="n">outfile</span><span class="p">)</span>
<span class="n">exp</span><span class="o">.</span><span class="n">setup</span><span class="p">()</span>
<span class="n">exp</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="c1"># evaluate previous run</span>
<span class="n">loader</span> <span class="o">=</span> <span class="n">converters</span><span class="o">.</span><span class="n">loader_for_file</span><span class="p">(</span><span class="n">outfile</span><span class="p">)</span>
<span class="n">data</span>   <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="n">outfile</span><span class="p">)</span>
<span class="n">matrix</span> <span class="o">=</span> <span class="n">ResultMatrix</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.experiment.ResultMatrixPlainText&quot;</span><span class="p">)</span>
<span class="n">tester</span> <span class="o">=</span> <span class="n">Tester</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.experiment.PairedCorrectedTTester&quot;</span><span class="p">)</span>
<span class="n">tester</span><span class="o">.</span><span class="n">resultmatrix</span> <span class="o">=</span> <span class="n">matrix</span>
<span class="n">comparison_col</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">attribute_by_name</span><span class="p">(</span><span class="s2">&quot;Correlation_coefficient&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">index</span>
<span class="n">tester</span><span class="o">.</span><span class="n">instances</span> <span class="o">=</span> <span class="n">data</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tester</span><span class="o">.</span><span class="n">header</span><span class="p">(</span><span class="n">comparison_col</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tester</span><span class="o">.</span><span class="n">multi_resultset_full</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">comparison_col</span><span class="p">))</span>
</pre></div>
</div>
<p>The <cite>Tester</cite> class allows you to swap columns and rows, therefore comparing datasets rather than classifiers:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tester</span> <span class="o">=</span> <span class="n">Tester</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.experiment.PairedCorrectedTTester&quot;</span><span class="p">)</span>
<span class="n">tester</span><span class="o">.</span><span class="n">swap_rows_and_cols</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">tester</span><span class="o">.</span><span class="n">resultmatrix</span> <span class="o">=</span> <span class="n">matrix</span>
</pre></div>
</div>
</section>
<section id="partial-classnames">
<h2>Partial classnames<a class="headerlink" href="#partial-classnames" title="Permalink to this headline">¶</a></h2>
<p>All classes derived from <cite>weka.core.classes.JavaObject</cite> like <cite>Classifier</cite>, <cite>Filter</cite>, etc.,
allow the use of partial classnames. So instead of instantiating a classifier like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="bp">cls</span> <span class="o">=</span> <span class="n">Classifier</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;weka.classifiers.trees.J48&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;-C&quot;</span><span class="p">,</span> <span class="s2">&quot;0.3&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>You can instantiate it with a shortened classname (must start with a <cite>.</cite>):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="bp">cls</span> <span class="o">=</span> <span class="n">Classifier</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;.J48&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;-C&quot;</span><span class="p">,</span> <span class="s2">&quot;0.3&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p><strong>NB:</strong> This will fail with an exception if there are no or multiple matches.
For instance, the following will result in an error, as there are two <cite>Discretize</cite>
filters, supervised and unsupervised:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="bp">cls</span> <span class="o">=</span> <span class="n">Filter</span><span class="p">(</span><span class="n">classname</span><span class="o">=</span><span class="s2">&quot;.Discretize&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Exception: Found multiple matches <span class="k">for</span> <span class="s1">&#39;.Discretize&#39;</span>:
weka.filters.supervised.attribute.Discretize
weka.filters.unsupervised.attribute.Discretize
</pre></div>
</div>
</section>
<section id="packages">
<h2>Packages<a class="headerlink" href="#packages" title="Permalink to this headline">¶</a></h2>
<p>The following examples show how to list, install and uninstall an <em>official</em> package:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">weka.core.packages</span> <span class="k">as</span> <span class="nn">packages</span>
<span class="n">items</span> <span class="o">=</span> <span class="n">packages</span><span class="o">.</span><span class="n">all_packages</span><span class="p">()</span>
<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;CLOPE&quot;</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">item</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>

<span class="n">packages</span><span class="o">.</span><span class="n">install_package</span><span class="p">(</span><span class="s2">&quot;CLOPE&quot;</span><span class="p">)</span>
<span class="n">items</span> <span class="o">=</span> <span class="n">packages</span><span class="o">.</span><span class="n">installed_packages</span><span class="p">()</span>
<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">item</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>

<span class="n">packages</span><span class="o">.</span><span class="n">uninstall_package</span><span class="p">(</span><span class="s2">&quot;CLOPE&quot;</span><span class="p">)</span>
<span class="n">items</span> <span class="o">=</span> <span class="n">packages</span><span class="o">.</span><span class="n">installed_packages</span><span class="p">()</span>
<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">item</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also install <em>unofficial</em> packages. The following example installs a previously downloaded zip file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">weka.core.packages</span> <span class="k">as</span> <span class="nn">packages</span>
<span class="n">success</span> <span class="o">=</span> <span class="n">packages</span><span class="o">.</span><span class="n">install_package</span><span class="p">(</span><span class="s2">&quot;/some/where/funky-package-1.0.0.zip&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">success</span><span class="p">)</span>
</pre></div>
</div>
<p>And here installing it directly from a URL:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">weka.core.packages</span> <span class="k">as</span> <span class="nn">packages</span>
<span class="n">info</span> <span class="o">=</span> <span class="n">packages</span><span class="o">.</span><span class="n">install_package</span><span class="p">(</span><span class="s2">&quot;http://some.server.com/funky-package-1.0.0.zip&quot;</span><span class="p">,</span> <span class="n">details</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>
</pre></div>
</div>
<p>Using the <cite>details=True</cite> flag, you can receive a dictionary instead of a simple boolean.
This dictionary consists of:</p>
<ul class="simple">
<li><p><cite>from_repo</cite>: whether the package was installed from the repo or not (i.e., unofficial URL or local archive)</p></li>
<li><p><cite>version</cite>: the version (only for packages from the repo)</p></li>
<li><p><cite>error</cite>: any error that may have occurred during installation</p></li>
<li><p><cite>install_message</cite>: optional message from the package maintainer on the installation</p></li>
<li><p><cite>success</cite>: whether the package was installed successfully</p></li>
</ul>
<p>Of course, you can also install multiple packages in one go using the
<cite>install_packages</cite> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">weka.core.packages</span> <span class="k">as</span> <span class="nn">packages</span>
<span class="n">info</span> <span class="o">=</span> <span class="n">packages</span><span class="o">.</span><span class="n">install_packages</span><span class="p">([</span>
    <span class="s2">&quot;http://some.server.com/funky-package-1.0.0.zip&quot;</span><span class="p">,</span>
    <span class="s2">&quot;http://some.server.com/cool-package-2.0.0.zip&quot;</span><span class="p">,</span>
    <span class="s2">&quot;http://some.server.com/fancy-package-1.1.0.zip&quot;</span><span class="p">,</span>
<span class="p">],</span> <span class="n">fail_fast</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">details</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>This method offers the <cite>details</cite> flag as well and returns a dictionary with
the package name/URL/file name as the key and the information dictionary as
the value.</p>
<p>With the <cite>fail_fast</cite> flag you can control whether to stop the installation process
as soon as the first package fails to install (<cite>fail_fast=True</cite>) or keep trying to
install them (<cite>fail_fast=False</cite>).</p>
<p>You can include automatic installation of packages in your scripts:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">weka.core.jvm</span> <span class="k">as</span> <span class="nn">jvm</span>
<span class="kn">from</span> <span class="nn">weka.core.packages</span> <span class="kn">import</span> <span class="n">install_missing_package</span><span class="p">,</span> <span class="n">install_missing_packages</span><span class="p">,</span> <span class="n">LATEST</span>

<span class="c1"># installs a single package (if missing) and exits if installation occurred (outputs messages in console)</span>
<span class="n">install_missing_package</span><span class="p">(</span><span class="s2">&quot;CLOPE&quot;</span><span class="p">,</span> <span class="n">stop_jvm_and_exit</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># installs any missing package, outputs messages in console, but restarting JVM is left to script</span>
<span class="n">success</span><span class="p">,</span> <span class="n">exit_required</span> <span class="o">=</span> <span class="n">install_missing_packages</span><span class="p">([(</span><span class="s2">&quot;CLOPE&quot;</span><span class="p">,</span> <span class="n">LATEST</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;gridSearch&quot;</span><span class="p">,</span> <span class="n">LATEST</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;multisearch&quot;</span><span class="p">,</span> <span class="n">LATEST</span><span class="p">)])</span>
<span class="k">if</span> <span class="n">exit_required</span><span class="p">:</span>
    <span class="n">jvm</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also output suggested Weka packages for partial class/package names or exact class names (default is partial
string matching):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># suggest package for classifier &#39;RBFClassifier&#39;</span>
<span class="n">search</span> <span class="o">=</span> <span class="s2">&quot;RBFClassifier&quot;</span>
<span class="n">suggestions</span> <span class="o">=</span> <span class="n">packages</span><span class="o">.</span><span class="n">suggest_package</span><span class="p">(</span><span class="n">search</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;suggested packages for &quot;</span> <span class="o">+</span> <span class="n">search</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="n">suggestions</span><span class="p">)</span>

<span class="c1"># suggest package for package &#39;.ft.&#39;</span>
<span class="n">search</span> <span class="o">=</span> <span class="s2">&quot;.ft.&quot;</span>
<span class="n">suggestions</span> <span class="o">=</span> <span class="n">packages</span><span class="o">.</span><span class="n">suggest_package</span><span class="p">(</span><span class="n">search</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;suggested packages for &quot;</span> <span class="o">+</span> <span class="n">search</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="n">suggestions</span><span class="p">)</span>

<span class="c1"># suggest package for classifier &#39;weka.classifiers.trees.J48graft&#39;</span>
<span class="n">search</span> <span class="o">=</span> <span class="s2">&quot;weka.classifiers.trees.J48graft&quot;</span>
<span class="n">suggestions</span> <span class="o">=</span> <span class="n">packages</span><span class="o">.</span><span class="n">suggest_package</span><span class="p">(</span><span class="n">search</span><span class="p">,</span> <span class="n">exact</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;suggested packages for &quot;</span> <span class="o">+</span> <span class="n">search</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="n">suggestions</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="stop-jvm">
<h2>Stop JVM<a class="headerlink" href="#stop-jvm" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">jvm</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="database-access">
<h2>Database access<a class="headerlink" href="#database-access" title="Permalink to this headline">¶</a></h2>
<p>Thanks to JDBC (Java Database Connectivity) it is very easy to connect to SQL databases and load data
as an Instances object. However, since we rely on 3rd-party libraries to achieve this, we need to
specify the database JDBC driver jar when we are starting up the JVM. For instance, adding a MySQL
driver called <cite>mysql-connector-java-X.Y.Z-bin.jar</cite>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">jvm</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">class_path</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;/some/where/mysql-connector-java-X.Y.Z-bin.jar&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>Assuming the following parameters:</p>
<blockquote>
<div><ul class="simple">
<li><p>database host is <cite>dbserver</cite></p></li>
<li><p>database is called <cite>mydb</cite></p></li>
<li><p>database user is <cite>me</cite></p></li>
<li><p>database password is <cite>verysecret</cite></p></li>
</ul>
</div></blockquote>
<p>We can use the following code to select all the data from table <cite>lotsadata</cite>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">weka.core.database</span> <span class="kn">import</span> <span class="n">InstanceQuery</span>
<span class="n">iquery</span> <span class="o">=</span> <span class="n">InstanceQuery</span><span class="p">()</span>
<span class="n">iquery</span><span class="o">.</span><span class="n">db_url</span> <span class="o">=</span> <span class="s2">&quot;jdbc:mysql://dbserver:3306/mydb&quot;</span>
<span class="n">iquery</span><span class="o">.</span><span class="n">user</span> <span class="o">=</span> <span class="s2">&quot;me&quot;</span>
<span class="n">iquery</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="s2">&quot;verysecret&quot;</span>
<span class="n">iquery</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="s2">&quot;select * from lotsadata&quot;</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">iquery</span><span class="o">.</span><span class="n">retrieve_instances</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/logo.jpg" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="index.html">python-weka-wrapper3</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker.html">Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#start-up-jvm">Start up JVM</a></li>
<li class="toctree-l2"><a class="reference internal" href="#location-of-the-datasets">Location of the datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="#load-dataset-and-print-it">Load dataset and print it</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-dataset-manually">Create dataset manually</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-dataset-from-lists">Create dataset from lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-dataset-from-matrices">Create dataset from matrices</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dataset-subsets">Dataset subsets</a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-generators">Data generators</a></li>
<li class="toctree-l2"><a class="reference internal" href="#filters">Filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="#output-help-from-underlying-optionhandler">Output help from underlying OptionHandler</a></li>
<li class="toctree-l2"><a class="reference internal" href="#option-handling">Option handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="#build-classifier-on-dataset-output-predictions">Build classifier on dataset, output predictions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#build-classifier-on-dataset-print-model-and-draw-graph">Build classifier on dataset, print model and draw graph</a></li>
<li class="toctree-l2"><a class="reference internal" href="#build-classifier-incrementally-with-data-and-print-model">Build classifier incrementally with data and print model</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cross-validate-filtered-classifier-and-print-evaluation-and-display-roc">Cross-validate filtered classifier and print evaluation and display ROC</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cross-validate-regressor-display-classifier-errors-and-predictions">Cross-validate regressor, display classifier errors and predictions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#parameter-optimization-property-names">Parameter optimization - property names</a></li>
<li class="toctree-l2"><a class="reference internal" href="#parameter-optimization-gridsearch">Parameter optimization - GridSearch</a></li>
<li class="toctree-l2"><a class="reference internal" href="#parameter-optimization-multisearch">Parameter optimization - MultiSearch</a></li>
<li class="toctree-l2"><a class="reference internal" href="#clustering">Clustering</a></li>
<li class="toctree-l2"><a class="reference internal" href="#associations">Associations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#attribute-selection">Attribute selection</a></li>
<li class="toctree-l2"><a class="reference internal" href="#timeseries">Timeseries</a></li>
<li class="toctree-l2"><a class="reference internal" href="#serialization">Serialization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#experiments">Experiments</a></li>
<li class="toctree-l2"><a class="reference internal" href="#partial-classnames">Partial classnames</a></li>
<li class="toctree-l2"><a class="reference internal" href="#packages">Packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="#stop-jvm">Stop JVM</a></li>
<li class="toctree-l2"><a class="reference internal" href="#database-access">Database access</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="commandline.html">Command-line</a></li>
<li class="toctree-l1"><a class="reference internal" href="flow.html">Flow</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="weka.html">weka package</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="troubleshooting.html" title="previous chapter">Troubleshooting</a></li>
      <li>Next: <a href="commandline.html" title="next chapter">Command-line</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2014-2022, Peter "fracpete" Reutemann.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/examples.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>